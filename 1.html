
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fight Club - 1</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        body {
            margin-top: 250px; /* Add top margin to the whole body */
        }
    
        #chart {
            width: 100%;
            height: 800px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 50px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
            cursor: pointer;
        }
        #box-whisker-chart {
            width: 100%;
            height: 600px;
        }
    </style>
</head>
<body>
    <div id="chart"></div>
 <div id="box-whisker-chart"></div>
    <table id="data-table">
        <thead>
            <tr>
                <th data-column="class">Class</th>
                <th data-column="wins">Wins</th>
                <th data-column="losses">Losses</th>
                <th data-column="winrate">Win Rate (%)</th>
                <th data-column="damage">Damage Done</th>
                <th data-column="healing">Healing Done</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
   
    <script>
        var chart = echarts.init(document.getElementById('chart'));

        // Sample data
        var classes = ['Berserker', 'Shaman', 'Nightshade', 'Infiltrator', 'Scout', 'Warrior', 'Vampiir', 'Savage', 'Thane', 'Bonedancer', 'Druid', 'Theurgist', 'Enchanter', 'Cleric', 'Spiritmaster', 'Warlock', 'Valkyrie', 'Ranger', 'Minstrel', 'Runemaster', 'Cabalist', 'Wizard', 'Eldritch', 'Armsman', 'Bard', 'Heretic', 'Reaver', 'Hunter', 'Friar', 'Warden', 'Animist', 'Mercenary', 'Valewalker', 'Bainshee', 'Hero', 'Paladin', 'Necromancer', 'Champion', 'Skald', 'Occultist', 'Mentalist', 'Shadowblade', 'Sorcerer', 'Healer', 'Blademaster'];
        var rawData = {'2025-03-29': {'Vampiir': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 568, 'healing done': 0}, 'Hunter': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}}, '2025-03-30': {'Shaman': {'wins': 1, 'losses': 5, 'total': 6, 'damage done': 3448, 'healing done': 724}, 'Wizard': {'wins': 4, 'losses': 8, 'total': 12, 'damage done': 10053, 'healing done': 0}, 'Minstrel': {'wins': 6, 'losses': 3, 'total': 9, 'damage done': 20900, 'healing done': 0}, 'Eldritch': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 1872, 'healing done': 0}, 'Warden': {'wins': 4, 'losses': 4, 'total': 8, 'damage done': 16548, 'healing done': 12658}, 'Skald': {'wins': 10, 'losses': 7, 'total': 17, 'damage done': 29580, 'healing done': 1043}, 'Berserker': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 1954, 'healing done': 0}, 'Spiritmaster': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 3580, 'healing done': 0}, 'Vampiir': {'wins': 3, 'losses': 2, 'total': 5, 'damage done': 9644, 'healing done': 2557}, 'Theurgist': {'wins': 2, 'losses': 4, 'total': 6, 'damage done': 2346, 'healing done': 0}, 'Savage': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 1880, 'healing done': 0}, 'Bonedancer': {'wins': 2, 'losses': 2, 'total': 4, 'damage done': 2863, 'healing done': 0}, 'Champion': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 2102, 'healing done': 0}, 'Warlock': {'wins': 7, 'losses': 13, 'total': 20, 'damage done': 27043, 'healing done': 1132}, 'Occultist': {'wins': 11, 'losses': 10, 'total': 21, 'damage done': 34436, 'healing done': 2722}, 'Friar': {'wins': 6, 'losses': 7, 'total': 13, 'damage done': 13177, 'healing done': 7256}, 'Scout': {'wins': 6, 'losses': 5, 'total': 11, 'damage done': 15275, 'healing done': 287}, 'Mentalist': {'wins': 6, 'losses': 3, 'total': 9, 'damage done': 14297, 'healing done': 0}, 'Runemaster': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 0, 'healing done': 0}, 'Enchanter': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 863, 'healing done': 0}, 'Valkyrie': {'wins': 4, 'losses': 5, 'total': 9, 'damage done': 10290, 'healing done': 4956}, 'Reaver': {'wins': 5, 'losses': 0, 'total': 5, 'damage done': 15444, 'healing done': 162}, 'Druid': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 2308}, 'Animist': {'wins': 3, 'losses': 3, 'total': 6, 'damage done': 5094, 'healing done': 0}, 'Hunter': {'wins': 4, 'losses': 1, 'total': 5, 'damage done': 9150, 'healing done': 0}, 'Sorcerer': {'wins': 1, 'losses': 6, 'total': 7, 'damage done': 4523, 'healing done': 0}, 'Heretic': {'wins': 1, 'losses': 7, 'total': 8, 'damage done': 10516, 'healing done': 3858}, 'Hero': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 2890, 'healing done': 0}, 'Mercenary': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 5479, 'healing done': 137}, 'Bainshee': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 1585, 'healing done': 0}, 'Infiltrator': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 1990, 'healing done': 0}, 'Valewalker': {'wins': 5, 'losses': 2, 'total': 7, 'damage done': 10961, 'healing done': 0}, 'Armsman': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 4471, 'healing done': 0}, 'Ranger': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 1039, 'healing done': 0}, 'Thane': {'wins': 3, 'losses': 1, 'total': 4, 'damage done': 4959, 'healing done': 162}, 'Paladin': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 1840, 'healing done': 506}, 'Bard': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 1443, 'healing done': 0}, 'Warrior': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 2029, 'healing done': 162}}, '2025-03-31': {'Vampiir': {'wins': 34, 'losses': 24, 'total': 58, 'damage done': 112776, 'healing done': 26461}, 'Occultist': {'wins': 13, 'losses': 16, 'total': 29, 'damage done': 44995, 'healing done': 1902}, 'Heretic': {'wins': 5, 'losses': 27, 'total': 32, 'damage done': 34137, 'healing done': 4385}, 'Scout': {'wins': 11, 'losses': 9, 'total': 20, 'damage done': 35685, 'healing done': 574}, 'Champion': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 5450, 'healing done': 0}, 'Druid': {'wins': 5, 'losses': 5, 'total': 10, 'damage done': 17175, 'healing done': 10705}, 'Skald': {'wins': 21, 'losses': 32, 'total': 53, 'damage done': 91505, 'healing done': 4628}, 'Sorcerer': {'wins': 12, 'losses': 17, 'total': 29, 'damage done': 51702, 'healing done': 145}, 'Cleric': {'wins': 2, 'losses': 9, 'total': 11, 'damage done': 5425, 'healing done': 10519}, 'Shadowblade': {'wins': 14, 'losses': 0, 'total': 14, 'damage done': 36057, 'healing done': 1137}, 'Infiltrator': {'wins': 3, 'losses': 8, 'total': 11, 'damage done': 15253, 'healing done': 173}, 'Minstrel': {'wins': 22, 'losses': 14, 'total': 36, 'damage done': 68306, 'healing done': 3220}, 'Healer': {'wins': 2, 'losses': 7, 'total': 9, 'damage done': 2953, 'healing done': 3356}, 'Valewalker': {'wins': 11, 'losses': 11, 'total': 22, 'damage done': 31289, 'healing done': 1131}, 'Paladin': {'wins': 7, 'losses': 10, 'total': 17, 'damage done': 29259, 'healing done': 4715}, 'Reaver': {'wins': 14, 'losses': 10, 'total': 24, 'damage done': 50685, 'healing done': 810}, 'Valkyrie': {'wins': 28, 'losses': 14, 'total': 42, 'damage done': 107647, 'healing done': 46348}, 'Wizard': {'wins': 11, 'losses': 27, 'total': 38, 'damage done': 34781, 'healing done': 1221}, 'Shaman': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 72, 'healing done': 0}, 'Warlock': {'wins': 19, 'losses': 21, 'total': 40, 'damage done': 62336, 'healing done': 875}, 'Bonedancer': {'wins': 7, 'losses': 3, 'total': 10, 'damage done': 19476, 'healing done': 4886}, 'Berserker': {'wins': 5, 'losses': 13, 'total': 18, 'damage done': 25585, 'healing done': 488}, 'Friar': {'wins': 12, 'losses': 15, 'total': 27, 'damage done': 52820, 'healing done': 34768}, 'Thane': {'wins': 5, 'losses': 9, 'total': 14, 'damage done': 19096, 'healing done': 599}, 'Runemaster': {'wins': 5, 'losses': 9, 'total': 14, 'damage done': 10928, 'healing done': 0}, 'Blademaster': {'wins': 2, 'losses': 5, 'total': 7, 'damage done': 6058, 'healing done': 0}, 'Cabalist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 199, 'healing done': 0}, 'Spiritmaster': {'wins': 6, 'losses': 12, 'total': 18, 'damage done': 16479, 'healing done': 162}, 'Mentalist': {'wins': 11, 'losses': 7, 'total': 18, 'damage done': 28078, 'healing done': 2731}, 'Eldritch': {'wins': 15, 'losses': 11, 'total': 26, 'damage done': 31647, 'healing done': 0}, 'Hunter': {'wins': 5, 'losses': 1, 'total': 6, 'damage done': 8451, 'healing done': 378}, 'Warrior': {'wins': 12, 'losses': 4, 'total': 16, 'damage done': 37129, 'healing done': 1337}, 'Theurgist': {'wins': 1, 'losses': 6, 'total': 7, 'damage done': 2888, 'healing done': 0}, 'Nightshade': {'wins': 7, 'losses': 6, 'total': 13, 'damage done': 17359, 'healing done': 345}, 'Enchanter': {'wins': 2, 'losses': 7, 'total': 9, 'damage done': 6073, 'healing done': 0}, 'Animist': {'wins': 10, 'losses': 5, 'total': 15, 'damage done': 23659, 'healing done': 2632}, 'Warden': {'wins': 8, 'losses': 19, 'total': 27, 'damage done': 33452, 'healing done': 15906}, 'Hero': {'wins': 27, 'losses': 12, 'total': 39, 'damage done': 77498, 'healing done': 3745}, 'Mercenary': {'wins': 4, 'losses': 6, 'total': 10, 'damage done': 16829, 'healing done': 178}, 'Ranger': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 0, 'healing done': 0}, 'Armsman': {'wins': 1, 'losses': 3, 'total': 4, 'damage done': 7858, 'healing done': 588}, 'Savage': {'wins': 12, 'losses': 5, 'total': 17, 'damage done': 37300, 'healing done': 3005}, 'Necromancer': {'wins': 3, 'losses': 1, 'total': 4, 'damage done': 13196, 'healing done': 0}, 'Bainshee': {'wins': 4, 'losses': 4, 'total': 8, 'damage done': 10149, 'healing done': 225}, 'Bard': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 1678, 'healing done': 319}}, '2025-04-01': {'Hero': {'wins': 24, 'losses': 11, 'total': 35, 'damage done': 87946, 'healing done': 5618}, 'Shaman': {'wins': 3, 'losses': 13, 'total': 16, 'damage done': 11310, 'healing done': 3798}, 'Animist': {'wins': 3, 'losses': 10, 'total': 13, 'damage done': 9408, 'healing done': 6757}, 'Skald': {'wins': 79, 'losses': 84, 'total': 163, 'damage done': 272658, 'healing done': 12762}, 'Valkyrie': {'wins': 32, 'losses': 31, 'total': 63, 'damage done': 103847, 'healing done': 43573}, 'Eldritch': {'wins': 64, 'losses': 49, 'total': 113, 'damage done': 148776, 'healing done': 3318}, 'Warden': {'wins': 9, 'losses': 21, 'total': 30, 'damage done': 81611, 'healing done': 28154}, 'Berserker': {'wins': 28, 'losses': 34, 'total': 62, 'damage done': 90481, 'healing done': 9668}, 'Warlock': {'wins': 73, 'losses': 43, 'total': 116, 'damage done': 227900, 'healing done': 3315}, 'Runemaster': {'wins': 8, 'losses': 18, 'total': 26, 'damage done': 22848, 'healing done': 250}, 'Bonedancer': {'wins': 10, 'losses': 8, 'total': 18, 'damage done': 25685, 'healing done': 0}, 'Warrior': {'wins': 12, 'losses': 5, 'total': 17, 'damage done': 46185, 'healing done': 3838}, 'Thane': {'wins': 31, 'losses': 25, 'total': 56, 'damage done': 94530, 'healing done': 3936}, 'Healer': {'wins': 1, 'losses': 17, 'total': 18, 'damage done': 2129, 'healing done': 2326}, 'Spiritmaster': {'wins': 16, 'losses': 21, 'total': 37, 'damage done': 44936, 'healing done': 0}, 'Shadowblade': {'wins': 24, 'losses': 9, 'total': 33, 'damage done': 97037, 'healing done': 6103}, 'Friar': {'wins': 19, 'losses': 44, 'total': 63, 'damage done': 71981, 'healing done': 54288}, 'Savage': {'wins': 10, 'losses': 9, 'total': 19, 'damage done': 42538, 'healing done': 3697}, 'Scout': {'wins': 19, 'losses': 23, 'total': 42, 'damage done': 64115, 'healing done': 1994}, 'Mentalist': {'wins': 28, 'losses': 30, 'total': 58, 'damage done': 75166, 'healing done': 13375}, 'Hunter': {'wins': 32, 'losses': 14, 'total': 46, 'damage done': 88644, 'healing done': 761}, 'Minstrel': {'wins': 42, 'losses': 42, 'total': 84, 'damage done': 158889, 'healing done': 7367}, 'Valewalker': {'wins': 34, 'losses': 31, 'total': 65, 'damage done': 127630, 'healing done': 9910}, 'Heretic': {'wins': 13, 'losses': 28, 'total': 41, 'damage done': 46079, 'healing done': 12737}, 'Reaver': {'wins': 20, 'losses': 6, 'total': 26, 'damage done': 55013, 'healing done': 1621}, 'Infiltrator': {'wins': 8, 'losses': 17, 'total': 25, 'damage done': 34886, 'healing done': 236}, 'Cleric': {'wins': 4, 'losses': 18, 'total': 22, 'damage done': 15745, 'healing done': 26897}, 'Wizard': {'wins': 11, 'losses': 31, 'total': 42, 'damage done': 46556, 'healing done': 2596}, 'Sorcerer': {'wins': 18, 'losses': 32, 'total': 50, 'damage done': 45610, 'healing done': 1338}, 'Bard': {'wins': 14, 'losses': 18, 'total': 32, 'damage done': 47221, 'healing done': 16526}, 'Theurgist': {'wins': 10, 'losses': 25, 'total': 35, 'damage done': 39197, 'healing done': 60}, 'Bainshee': {'wins': 1, 'losses': 7, 'total': 8, 'damage done': 3696, 'healing done': 162}, 'Blademaster': {'wins': 5, 'losses': 12, 'total': 17, 'damage done': 24404, 'healing done': 1274}, 'Paladin': {'wins': 6, 'losses': 15, 'total': 21, 'damage done': 25317, 'healing done': 6368}, 'Occultist': {'wins': 27, 'losses': 43, 'total': 70, 'damage done': 109109, 'healing done': 9354}, 'Vampiir': {'wins': 60, 'losses': 36, 'total': 96, 'damage done': 181861, 'healing done': 53641}, 'Enchanter': {'wins': 7, 'losses': 14, 'total': 21, 'damage done': 21220, 'healing done': 0}, 'Ranger': {'wins': 4, 'losses': 7, 'total': 11, 'damage done': 10900, 'healing done': 0}, 'Champion': {'wins': 4, 'losses': 4, 'total': 8, 'damage done': 15145, 'healing done': 486}, 'Cabalist': {'wins': 3, 'losses': 4, 'total': 7, 'damage done': 10289, 'healing done': 0}, 'Druid': {'wins': 9, 'losses': 4, 'total': 13, 'damage done': 38475, 'healing done': 15812}, 'Mercenary': {'wins': 14, 'losses': 13, 'total': 27, 'damage done': 71407, 'healing done': 1694}, 'Nightshade': {'wins': 7, 'losses': 4, 'total': 11, 'damage done': 19738, 'healing done': 477}, 'Armsman': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 6180, 'healing done': 299}, 'Necromancer': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 9208, 'healing done': 0}}, '2025-04-02': {'Skald': {'wins': 90, 'losses': 85, 'total': 175, 'damage done': 322887, 'healing done': 15590}, 'Wizard': {'wins': 1, 'losses': 40, 'total': 41, 'damage done': 12780, 'healing done': 404}, 'Blademaster': {'wins': 6, 'losses': 5, 'total': 11, 'damage done': 21364, 'healing done': 473}, 'Infiltrator': {'wins': 22, 'losses': 16, 'total': 38, 'damage done': 54842, 'healing done': 2001}, 'Scout': {'wins': 24, 'losses': 33, 'total': 57, 'damage done': 87346, 'healing done': 3304}, 'Heretic': {'wins': 7, 'losses': 56, 'total': 63, 'damage done': 55009, 'healing done': 8858}, 'Warlock': {'wins': 104, 'losses': 49, 'total': 153, 'damage done': 327266, 'healing done': 6117}, 'Vampiir': {'wins': 123, 'losses': 38, 'total': 161, 'damage done': 414259, 'healing done': 112153}, 'Valkyrie': {'wins': 43, 'losses': 22, 'total': 65, 'damage done': 152996, 'healing done': 66211}, 'Eldritch': {'wins': 53, 'losses': 45, 'total': 98, 'damage done': 141809, 'healing done': 2414}, 'Bard': {'wins': 31, 'losses': 19, 'total': 50, 'damage done': 106792, 'healing done': 27729}, 'Minstrel': {'wins': 53, 'losses': 56, 'total': 109, 'damage done': 218348, 'healing done': 10197}, 'Shaman': {'wins': 1, 'losses': 9, 'total': 10, 'damage done': 5271, 'healing done': 1855}, 'Berserker': {'wins': 19, 'losses': 34, 'total': 53, 'damage done': 93170, 'healing done': 7816}, 'Mercenary': {'wins': 12, 'losses': 13, 'total': 25, 'damage done': 51868, 'healing done': 1657}, 'Enchanter': {'wins': 5, 'losses': 17, 'total': 22, 'damage done': 17772, 'healing done': 768}, 'Hunter': {'wins': 29, 'losses': 15, 'total': 44, 'damage done': 76423, 'healing done': 2906}, 'Occultist': {'wins': 31, 'losses': 44, 'total': 75, 'damage done': 138826, 'healing done': 7738}, 'Mentalist': {'wins': 23, 'losses': 32, 'total': 55, 'damage done': 61738, 'healing done': 6249}, 'Spiritmaster': {'wins': 7, 'losses': 19, 'total': 26, 'damage done': 18944, 'healing done': 243}, 'Valewalker': {'wins': 26, 'losses': 17, 'total': 43, 'damage done': 81454, 'healing done': 2783}, 'Nightshade': {'wins': 25, 'losses': 9, 'total': 34, 'damage done': 60103, 'healing done': 766}, 'Sorcerer': {'wins': 19, 'losses': 29, 'total': 48, 'damage done': 50228, 'healing done': 897}, 'Theurgist': {'wins': 8, 'losses': 21, 'total': 29, 'damage done': 18001, 'healing done': 612}, 'Paladin': {'wins': 5, 'losses': 21, 'total': 26, 'damage done': 38159, 'healing done': 7614}, 'Bonedancer': {'wins': 6, 'losses': 4, 'total': 10, 'damage done': 11713, 'healing done': 0}, 'Friar': {'wins': 18, 'losses': 43, 'total': 61, 'damage done': 91006, 'healing done': 81443}, 'Warden': {'wins': 9, 'losses': 20, 'total': 29, 'damage done': 44357, 'healing done': 44430}, 'Animist': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 1451, 'healing done': 0}, 'Champion': {'wins': 5, 'losses': 9, 'total': 14, 'damage done': 26819, 'healing done': 973}, 'Thane': {'wins': 22, 'losses': 38, 'total': 60, 'damage done': 100273, 'healing done': 5684}, 'Savage': {'wins': 7, 'losses': 10, 'total': 17, 'damage done': 31156, 'healing done': 980}, 'Healer': {'wins': 0, 'losses': 7, 'total': 7, 'damage done': 1091, 'healing done': 10288}, 'Bainshee': {'wins': 4, 'losses': 17, 'total': 21, 'damage done': 18162, 'healing done': 1074}, 'Runemaster': {'wins': 15, 'losses': 26, 'total': 41, 'damage done': 39244, 'healing done': 1134}, 'Cleric': {'wins': 5, 'losses': 8, 'total': 13, 'damage done': 11911, 'healing done': 8131}, 'Warrior': {'wins': 14, 'losses': 14, 'total': 28, 'damage done': 77593, 'healing done': 6147}, 'Armsman': {'wins': 1, 'losses': 5, 'total': 6, 'damage done': 7086, 'healing done': 758}, 'Cabalist': {'wins': 1, 'losses': 9, 'total': 10, 'damage done': 3482, 'healing done': 162}, 'Reaver': {'wins': 5, 'losses': 11, 'total': 16, 'damage done': 16724, 'healing done': 324}, 'Hero': {'wins': 16, 'losses': 8, 'total': 24, 'damage done': 52064, 'healing done': 1914}, 'Ranger': {'wins': 1, 'losses': 10, 'total': 11, 'damage done': 7062, 'healing done': 574}, 'Shadowblade': {'wins': 12, 'losses': 3, 'total': 15, 'damage done': 34658, 'healing done': 2110}, 'Necromancer': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 7133, 'healing done': 0}, 'Druid': {'wins': 12, 'losses': 5, 'total': 17, 'damage done': 34336, 'healing done': 11051}}, '2025-04-03': {'Berserker': {'wins': 23, 'losses': 38, 'total': 61, 'damage done': 134635, 'healing done': 15104}, 'Friar': {'wins': 17, 'losses': 34, 'total': 51, 'damage done': 92091, 'healing done': 77370}, 'Scout': {'wins': 39, 'losses': 33, 'total': 72, 'damage done': 122897, 'healing done': 6933}, 'Ranger': {'wins': 11, 'losses': 9, 'total': 20, 'damage done': 37466, 'healing done': 1782}, 'Paladin': {'wins': 7, 'losses': 13, 'total': 20, 'damage done': 49758, 'healing done': 11871}, 'Warlock': {'wins': 42, 'losses': 35, 'total': 77, 'damage done': 124740, 'healing done': 4798}, 'Champion': {'wins': 10, 'losses': 7, 'total': 17, 'damage done': 40651, 'healing done': 4125}, 'Valkyrie': {'wins': 51, 'losses': 37, 'total': 88, 'damage done': 205844, 'healing done': 88769}, 'Cabalist': {'wins': 2, 'losses': 16, 'total': 18, 'damage done': 13367, 'healing done': 0}, 'Hero': {'wins': 11, 'losses': 18, 'total': 29, 'damage done': 63398, 'healing done': 6294}, 'Bainshee': {'wins': 4, 'losses': 3, 'total': 7, 'damage done': 11613, 'healing done': 781}, 'Sorcerer': {'wins': 20, 'losses': 31, 'total': 51, 'damage done': 58815, 'healing done': 1556}, 'Occultist': {'wins': 33, 'losses': 11, 'total': 44, 'damage done': 102421, 'healing done': 3474}, 'Vampiir': {'wins': 93, 'losses': 45, 'total': 138, 'damage done': 364490, 'healing done': 99298}, 'Skald': {'wins': 85, 'losses': 51, 'total': 136, 'damage done': 324218, 'healing done': 25064}, 'Valewalker': {'wins': 25, 'losses': 13, 'total': 38, 'damage done': 85605, 'healing done': 7250}, 'Bonedancer': {'wins': 3, 'losses': 17, 'total': 20, 'damage done': 16003, 'healing done': 2107}, 'Infiltrator': {'wins': 27, 'losses': 26, 'total': 53, 'damage done': 98129, 'healing done': 3779}, 'Wizard': {'wins': 10, 'losses': 34, 'total': 44, 'damage done': 31785, 'healing done': 1474}, 'Theurgist': {'wins': 2, 'losses': 12, 'total': 14, 'damage done': 9055, 'healing done': 236}, 'Minstrel': {'wins': 20, 'losses': 36, 'total': 56, 'damage done': 86535, 'healing done': 7031}, 'Healer': {'wins': 0, 'losses': 7, 'total': 7, 'damage done': 45, 'healing done': 3271}, 'Eldritch': {'wins': 16, 'losses': 22, 'total': 38, 'damage done': 53490, 'healing done': 752}, 'Warden': {'wins': 16, 'losses': 21, 'total': 37, 'damage done': 76562, 'healing done': 53556}, 'Spiritmaster': {'wins': 8, 'losses': 12, 'total': 20, 'damage done': 20735, 'healing done': 385}, 'Reaver': {'wins': 3, 'losses': 11, 'total': 14, 'damage done': 24838, 'healing done': 486}, 'Cleric': {'wins': 11, 'losses': 17, 'total': 28, 'damage done': 32211, 'healing done': 38548}, 'Mentalist': {'wins': 23, 'losses': 21, 'total': 44, 'damage done': 63101, 'healing done': 3112}, 'Necromancer': {'wins': 9, 'losses': 5, 'total': 14, 'damage done': 32034, 'healing done': 0}, 'Savage': {'wins': 14, 'losses': 12, 'total': 26, 'damage done': 42474, 'healing done': 2171}, 'Thane': {'wins': 28, 'losses': 31, 'total': 59, 'damage done': 124441, 'healing done': 4922}, 'Nightshade': {'wins': 26, 'losses': 17, 'total': 43, 'damage done': 70141, 'healing done': 2086}, 'Runemaster': {'wins': 14, 'losses': 15, 'total': 29, 'damage done': 44811, 'healing done': 1858}, 'Mercenary': {'wins': 19, 'losses': 16, 'total': 35, 'damage done': 95949, 'healing done': 9242}, 'Warrior': {'wins': 20, 'losses': 14, 'total': 34, 'damage done': 87088, 'healing done': 5450}, 'Heretic': {'wins': 4, 'losses': 28, 'total': 32, 'damage done': 30797, 'healing done': 4274}, 'Shadowblade': {'wins': 5, 'losses': 8, 'total': 13, 'damage done': 20726, 'healing done': 1842}, 'Enchanter': {'wins': 4, 'losses': 19, 'total': 23, 'damage done': 18038, 'healing done': 1482}, 'Druid': {'wins': 15, 'losses': 7, 'total': 22, 'damage done': 42144, 'healing done': 23268}, 'Animist': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 1725, 'healing done': 0}, 'Bard': {'wins': 13, 'losses': 9, 'total': 22, 'damage done': 36134, 'healing done': 11630}, 'Blademaster': {'wins': 6, 'losses': 12, 'total': 18, 'damage done': 31362, 'healing done': 1008}, 'Shaman': {'wins': 10, 'losses': 11, 'total': 21, 'damage done': 27601, 'healing done': 3455}, 'Hunter': {'wins': 18, 'losses': 17, 'total': 35, 'damage done': 55343, 'healing done': 2043}, 'Armsman': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 4774, 'healing done': 1587}}, '2025-04-04': {'Sorcerer': {'wins': 27, 'losses': 31, 'total': 58, 'damage done': 70132, 'healing done': 2494}, 'Valkyrie': {'wins': 32, 'losses': 37, 'total': 69, 'damage done': 147185, 'healing done': 79439}, 'Skald': {'wins': 81, 'losses': 55, 'total': 136, 'damage done': 301119, 'healing done': 15050}, 'Eldritch': {'wins': 29, 'losses': 40, 'total': 69, 'damage done': 82918, 'healing done': 2480}, 'Bonedancer': {'wins': 7, 'losses': 29, 'total': 36, 'damage done': 30442, 'healing done': 1189}, 'Warlock': {'wins': 61, 'losses': 60, 'total': 121, 'damage done': 220051, 'healing done': 8650}, 'Animist': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 4847, 'healing done': 0}, 'Bard': {'wins': 10, 'losses': 4, 'total': 14, 'damage done': 33980, 'healing done': 16235}, 'Cabalist': {'wins': 3, 'losses': 6, 'total': 9, 'damage done': 9135, 'healing done': 225}, 'Bainshee': {'wins': 0, 'losses': 7, 'total': 7, 'damage done': 870, 'healing done': 0}, 'Vampiir': {'wins': 147, 'losses': 58, 'total': 205, 'damage done': 515623, 'healing done': 159388}, 'Infiltrator': {'wins': 34, 'losses': 26, 'total': 60, 'damage done': 119467, 'healing done': 6467}, 'Shaman': {'wins': 2, 'losses': 13, 'total': 15, 'damage done': 6797, 'healing done': 1817}, 'Thane': {'wins': 25, 'losses': 33, 'total': 58, 'damage done': 96939, 'healing done': 4934}, 'Champion': {'wins': 10, 'losses': 10, 'total': 20, 'damage done': 38794, 'healing done': 3528}, 'Savage': {'wins': 6, 'losses': 16, 'total': 22, 'damage done': 45065, 'healing done': 1682}, 'Runemaster': {'wins': 18, 'losses': 29, 'total': 47, 'damage done': 60714, 'healing done': 938}, 'Mentalist': {'wins': 16, 'losses': 19, 'total': 35, 'damage done': 40828, 'healing done': 4454}, 'Cleric': {'wins': 6, 'losses': 18, 'total': 24, 'damage done': 25381, 'healing done': 38439}, 'Minstrel': {'wins': 30, 'losses': 37, 'total': 67, 'damage done': 123647, 'healing done': 10361}, 'Warden': {'wins': 1, 'losses': 10, 'total': 11, 'damage done': 6447, 'healing done': 5661}, 'Enchanter': {'wins': 6, 'losses': 20, 'total': 26, 'damage done': 32450, 'healing done': 248}, 'Mercenary': {'wins': 44, 'losses': 23, 'total': 67, 'damage done': 216478, 'healing done': 15199}, 'Berserker': {'wins': 28, 'losses': 43, 'total': 71, 'damage done': 129391, 'healing done': 15653}, 'Nightshade': {'wins': 39, 'losses': 30, 'total': 69, 'damage done': 129239, 'healing done': 3468}, 'Hero': {'wins': 8, 'losses': 23, 'total': 31, 'damage done': 59768, 'healing done': 4642}, 'Druid': {'wins': 7, 'losses': 8, 'total': 15, 'damage done': 30376, 'healing done': 18113}, 'Spiritmaster': {'wins': 10, 'losses': 16, 'total': 26, 'damage done': 33273, 'healing done': 868}, 'Friar': {'wins': 24, 'losses': 38, 'total': 62, 'damage done': 92559, 'healing done': 73544}, 'Occultist': {'wins': 48, 'losses': 33, 'total': 81, 'damage done': 174121, 'healing done': 14066}, 'Reaver': {'wins': 11, 'losses': 19, 'total': 30, 'damage done': 51843, 'healing done': 2579}, 'Necromancer': {'wins': 6, 'losses': 5, 'total': 11, 'damage done': 24431, 'healing done': 0}, 'Shadowblade': {'wins': 36, 'losses': 18, 'total': 54, 'damage done': 111258, 'healing done': 7831}, 'Blademaster': {'wins': 6, 'losses': 15, 'total': 21, 'damage done': 38917, 'healing done': 1608}, 'Heretic': {'wins': 0, 'losses': 12, 'total': 12, 'damage done': 5303, 'healing done': 2680}, 'Paladin': {'wins': 2, 'losses': 11, 'total': 13, 'damage done': 7045, 'healing done': 1989}, 'Armsman': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 3047, 'healing done': 0}, 'Wizard': {'wins': 4, 'losses': 19, 'total': 23, 'damage done': 15731, 'healing done': 675}, 'Ranger': {'wins': 29, 'losses': 15, 'total': 44, 'damage done': 83179, 'healing done': 6945}, 'Valewalker': {'wins': 32, 'losses': 40, 'total': 72, 'damage done': 131147, 'healing done': 14461}, 'Healer': {'wins': 0, 'losses': 11, 'total': 11, 'damage done': 2553, 'healing done': 15227}, 'Warrior': {'wins': 23, 'losses': 16, 'total': 39, 'damage done': 145754, 'healing done': 14239}, 'Scout': {'wins': 43, 'losses': 24, 'total': 67, 'damage done': 154430, 'healing done': 3359}, 'Theurgist': {'wins': 0, 'losses': 6, 'total': 6, 'damage done': 228, 'healing done': 0}, 'Hunter': {'wins': 5, 'losses': 22, 'total': 27, 'damage done': 24035, 'healing done': 1731}}, '2025-04-05': {'Skald': {'wins': 8, 'losses': 2, 'total': 10, 'damage done': 17804, 'healing done': 437}, 'Minstrel': {'wins': 4, 'losses': 8, 'total': 12, 'damage done': 11531, 'healing done': 497}, 'Berserker': {'wins': 3, 'losses': 1, 'total': 4, 'damage done': 11402, 'healing done': 913}, 'Mentalist': {'wins': 1, 'losses': 6, 'total': 7, 'damage done': 2376, 'healing done': 473}, 'Paladin': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 4176, 'healing done': 368}, 'Thane': {'wins': 11, 'losses': 5, 'total': 16, 'damage done': 34286, 'healing done': 1410}, 'Warlock': {'wins': 16, 'losses': 5, 'total': 21, 'damage done': 63510, 'healing done': 1812}, 'Occultist': {'wins': 5, 'losses': 4, 'total': 9, 'damage done': 23449, 'healing done': 434}, 'Nightshade': {'wins': 14, 'losses': 8, 'total': 22, 'damage done': 40266, 'healing done': 578}, 'Vampiir': {'wins': 16, 'losses': 6, 'total': 22, 'damage done': 52793, 'healing done': 7767}, 'Mercenary': {'wins': 2, 'losses': 5, 'total': 7, 'damage done': 9572, 'healing done': 724}, 'Valkyrie': {'wins': 4, 'losses': 2, 'total': 6, 'damage done': 14867, 'healing done': 10694}, 'Infiltrator': {'wins': 6, 'losses': 9, 'total': 15, 'damage done': 37531, 'healing done': 1646}, 'Warden': {'wins': 0, 'losses': 7, 'total': 7, 'damage done': 1554, 'healing done': 1110}, 'Runemaster': {'wins': 1, 'losses': 3, 'total': 4, 'damage done': 2478, 'healing done': 0}, 'Spiritmaster': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1420, 'healing done': 0}, 'Friar': {'wins': 2, 'losses': 5, 'total': 7, 'damage done': 8266, 'healing done': 3987}, 'Wizard': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 3089, 'healing done': 0}, 'Champion': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 1760, 'healing done': 0}, 'Necromancer': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 4233, 'healing done': 0}, 'Ranger': {'wins': 2, 'losses': 4, 'total': 6, 'damage done': 5025, 'healing done': 0}, 'Hero': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 5959, 'healing done': 488}, 'Theurgist': {'wins': 1, 'losses': 4, 'total': 5, 'damage done': 2718, 'healing done': 225}, 'Scout': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 2557, 'healing done': 139}, 'Valewalker': {'wins': 4, 'losses': 15, 'total': 19, 'damage done': 20153, 'healing done': 1245}, 'Sorcerer': {'wins': 4, 'losses': 5, 'total': 9, 'damage done': 12597, 'healing done': 0}, 'Warrior': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 2437, 'healing done': 194}, 'Reaver': {'wins': 1, 'losses': 4, 'total': 5, 'damage done': 9807, 'healing done': 170}, 'Bard': {'wins': 7, 'losses': 4, 'total': 11, 'damage done': 20903, 'healing done': 7516}, 'Shaman': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 3867, 'healing done': 1867}, 'Hunter': {'wins': 8, 'losses': 5, 'total': 13, 'damage done': 19936, 'healing done': 1135}, 'Savage': {'wins': 1, 'losses': 3, 'total': 4, 'damage done': 3477, 'healing done': 0}, 'Blademaster': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 1466, 'healing done': 0}, 'Bonedancer': {'wins': 2, 'losses': 8, 'total': 10, 'damage done': 13204, 'healing done': 6079}, 'Cabalist': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 2074, 'healing done': 0}, 'Shadowblade': {'wins': 4, 'losses': 1, 'total': 5, 'damage done': 12658, 'healing done': 419}, 'Enchanter': {'wins': 2, 'losses': 4, 'total': 6, 'damage done': 7083, 'healing done': 148}, 'Cleric': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1179, 'healing done': 1094}, 'Druid': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 2179, 'healing done': 0}, 'Eldritch': {'wins': 0, 'losses': 6, 'total': 6, 'damage done': 1344, 'healing done': 0}}};
                var rawDataTimes = Object.keys(rawData).map(date => new Date(date).getTime());  // Convert date string to timestamp (milliseconds)

        // Get the minimum and maximum time
        var originalMinTime = new Date(Math.min(...rawDataTimes));  // Get the minimum timestamp
        var originalMaxTime = new Date(Math.max(...rawDataTimes));  // Get the maximum timestamp
                // Initial start and end time for filtering (based on raw data)

                // Track the current time window
                let currentMinTime = originalMinTime;
                let currentMaxTime = originalMaxTime;

                function processData(startTime, endTime) {
                    let groupedData = {};

                    // Loop through the raw data (which is in the format of date -> class -> stats)
                    for (let date in rawData) {
                        if (new Date(date) >= startTime && new Date(date) <= endTime) {
                            let dayData = rawData[date];
                            
                            // Group by class and aggregate the values
                            for (let className in dayData) {
                                if (!groupedData[className]) {
                                    groupedData[className] = { wins: 0, losses: 0, damage: 0, healing: 0, timeSeries: [] };
                                }

                                let { wins, losses, 'damage done': damage, 'healing done': healing } = dayData[className];
                                groupedData[className].wins += wins;
                                groupedData[className].losses += losses;
                                groupedData[className].damage += damage;
                                groupedData[className].healing += healing;
                                
                                // Add data to time series
                                groupedData[className].timeSeries.push([new Date(date).getTime(), wins]);
                            }
                        }
                    }
                    console.log(groupedData);
                    let seriesData = Object.keys(groupedData).map(className => ({
                        name: className,
                        type: 'line',
                        smooth: true,
                        data: groupedData[className].timeSeries
                    }));

                        // Create table data based on the grouped data
                    // Now process table data based on groupedData
                    let tableData = Object.keys(groupedData).map(className => {
                        let { wins, losses, damage, healing } = groupedData[className];
                        let winRate = wins + losses === 0 ? 0 : ((wins / (wins + losses)) * 100).toFixed(2);  // Correct win rate calculation
                        return {
                            class: className,
                            wins: wins,
                            losses: losses,
                            winRate: winRate,
                            damage: damage,
                            healing: healing
                        };
                    });

                    updateTable(tableData);
                    return seriesData;
                }

                function updateTable(tableData) {
                    let tbody = document.querySelector("#data-table tbody");
                    tbody.innerHTML = tableData.length ? tableData.map(row => {
                        return `<tr>
                            <td data-column="class">${row.class}</td>
                            <td data-column="wins">${row.wins}</td>
                            <td data-column="losses">${row.losses}</td>
                            <td data-column="winrate">${row.winRate}%</td>
                            <td data-column="damage">${row.damage}</td>
                            <td data-column="healing">${row.healing}</td>
                        </tr>`;
                    }).join('') : "<tr><td colspan='6'>No data available in this range</td></tr>";
                }

                function goupTheData(startTime, endTime){
                    var groupedData = {};
                    // Assuming startTime and endTime are valid Date objects or date strings
                    Object.keys(rawData).forEach(date => {
                        // Convert the date string to a Date object if it's not already
                        let currentDate = new Date(date);

                        // Check if the currentDate is between startTime and endTime
                        if (currentDate >= startTime && currentDate <= endTime) {
                            // If within range, iterate through each class and accumulate win rates
                            Object.keys(rawData[date]).forEach(className => {
                                let d = rawData[date][className];  // Get the data for each class
                                if (!groupedData[className]) {
                                    groupedData[className] = { winRates: [] };  // Initialize if not already present
                                }
                                // Calculate the win rate and push it to the winRates array
                                let winRate = d.wins / (d.wins + d.losses);
                                groupedData[className].winRates.push(winRate);
                            });
                        }
                    });
                    return groupedData;
                };


                function prepareBoxPlotData(values) {
                    values.sort((a, b) => a - b);
                    const min = values[0];
                    const max = values[values.length - 1];
                    const q1 = values[Math.floor(values.length * 0.25)];
                    const median = values[Math.floor(values.length * 0.5)];
                    const q3 = values[Math.floor(values.length * 0.75)];
                    return [min, q1, median, q3, max];
                }

                var chart1 = echarts.init(document.getElementById('box-whisker-chart'));
                function processBoxPlot(chart1, currentMinTime, currentMaxTime) {
                    var groupedData = goupTheData(currentMinTime, currentMaxTime);
                    var winRateBoxData = [];
                    var validClasses = [];
                    var winRateBoxData = [];
                    var validClasses = [];
                    classes.forEach(cls => {
                        if (groupedData[cls] && groupedData[cls].winRates.length > 0) {
                            validClasses.push(cls);
                            winRateBoxData.push(prepareBoxPlotData(groupedData[cls].winRates));
                        }
                    });
                    validClasses.sort();
                    
                    var option1 ={
                        title: { text: 'Box and Whisker Plot for Win Rates', left: 'center' },
                        tooltip: { trigger: 'item', axisPointer: { type: 'shadow' } },
                        xAxis: { type: 'category', data: validClasses, axisLabel: { rotate: 45 } },
                        yAxis: { type: 'value', name: 'Win Rate', min: 0, max: 1 },
                        series: [
                            { name: 'Win Rate', type: 'boxplot', data: winRateBoxData }
                        ]
                    };
                    chart1.setOption(option1);
                };
                processBoxPlot(chart1, currentMinTime, currentMaxTime)

                // Initial data processing
                let seriesData = processData(currentMinTime, currentMaxTime);

                var option = {
                    title: {
                        text: 'Wins by Class',
                        left: "center"
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: classes,
                        orient: 'horizontal',
                        bottom: 50, // Add a little more padding here to move the legend down
                        left: 'center'
                    },
                    grid: {
                        bottom: 150 // Add space at the bottom for the legend and zoom slider
                    },
                    xAxis: {
                        type: 'time',
                        name: 'Time'
                    },
                    yAxis: {
                        type: 'value',
                        name: 'Wins'
                    },
                    dataZoom: [
                        {
                            type: 'slider',
                            show: true,
                            xAxisIndex: 0,
                            start: 0,
                            end: 100
                        },
                        {
                            type: 'inside',
                            xAxisIndex: 0
                        }
                    ],
                    series: seriesData
                };

                chart.setOption(option);
                chart.on('datazoom', function (params) {
                    // Get the percentage values from the dataZoom event
                    let startPercent = params.start; // 0 to 100
                    let endPercent = params.end; // 0 to 100

                    // Calculate the time range from the percentages (relative to the original data bounds)
                    let timeRange = originalMaxTime.getTime() - originalMinTime.getTime();
                    let newMinTime = new Date(originalMinTime.getTime() + (timeRange * startPercent / 100));
                    let newMaxTime = new Date(originalMinTime.getTime() + (timeRange * endPercent / 100));

                    // Only update if the time range has changed
                    if (newMinTime.getTime() !== currentMinTime.getTime() || newMaxTime.getTime() !== currentMaxTime.getTime()) {
                        currentMinTime = newMinTime;
                        currentMaxTime = newMaxTime;

                        // Reprocess data based on updated time range and refresh both the chart and table
                        let newSeries = processData(currentMinTime, currentMaxTime);
                        chart.setOption({ series: newSeries });
                    }
                    processBoxPlot(chart1, currentMinTime, currentMaxTime);
                });

                // Sorting functionality for table
                // Ensure each table header has the corresponding data-column attribute
        const tableHeaders = document.querySelectorAll('th');
        tableHeaders.forEach(header => {
            header.addEventListener('click', function () {
                const column = this.getAttribute('data-column'); // Get the column name
                const rows = Array.from(document.querySelector('#data-table tbody').rows);

                // Determine sort order
                const currentSortOrder = this.dataset.sortOrder || 'asc';
                const newSortOrder = currentSortOrder === 'asc' ? 'desc' : 'asc';

                // Sort the rows based on the clicked column
                rows.sort((rowA, rowB) => {
                    const valA = rowA.querySelector(`td[data-column="${column}"]`).innerText;
                    const valB = rowB.querySelector(`td[data-column="${column}"]`).innerText;

                    if (column === 'class') {
                        return (valA > valB ? 1 : -1) * (newSortOrder === 'asc' ? 1 : -1);
                    }            
                    return (parseFloat(valA) - parseFloat(valB)) * (newSortOrder === 'asc' ? 1 : -1);
                });

                // Reorder the rows in the table body
                rows.forEach(row => {
                    document.querySelector('#data-table tbody').appendChild(row);
                });

                // Update sort order in the header for the next click
                this.dataset.sortOrder = newSortOrder;
            });
        });

            </script>
        </body>
        </html>

