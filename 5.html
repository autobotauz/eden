
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fight Club - 5</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <style>
        body {
            margin-top: 250px; /* Add top margin to the whole body */
        }
    
        #chart {
            width: 100%;
            height: 800px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 50px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
            cursor: pointer;
        }
        #box-whisker-chart {
            width: 100%;
            height: 600px;
        }
    </style>
</head>
<body>
    <div id="chart"></div>
 <div id="box-whisker-chart"></div>
    <table id="data-table">
        <thead>
            <tr>
                <th data-column="class">Class</th>
                <th data-column="wins">Wins</th>
                <th data-column="losses">Losses</th>
                <th data-column="winrate">Win Rate (%)</th>
                <th data-column="damage">Damage Done</th>
                <th data-column="healing">Healing Done</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
   
    <script>
        var chart = echarts.init(document.getElementById('chart'));

        // Sample data
        var classes = ['Thane', 'Druid', 'Warden', 'Warlock', 'Savage', 'Infiltrator', 'Enchanter', 'Theurgist', 'Cleric', 'Skald', 'Armsman', 'Eldritch', 'Necromancer', 'Occultist', 'Healer', 'Champion', 'Heretic', 'Mentalist', 'Valewalker', 'Cabalist', 'Bonedancer', 'Minstrel', 'Blademaster', 'Runemaster', 'Hero', 'Animist', 'Sorcerer', 'Scout', 'Bainshee', 'Nightshade', 'Shaman', 'Hunter', 'Ranger', 'Warrior', 'Mercenary', 'Reaver', 'Friar', 'Valkyrie', 'Berserker', 'Spiritmaster', 'Wizard', 'Bard', 'Paladin', 'Vampiir', 'Shadowblade'];
        var rawData = {'2025-04-03': {'Healer': {'wins': 9, 'losses': 1, 'total': 10, 'damage done': 449, 'healing done': 3440}, 'Warlock': {'wins': 8, 'losses': 2, 'total': 10, 'damage done': 107323, 'healing done': 946}, 'Skald': {'wins': 6, 'losses': 4, 'total': 10, 'damage done': 28319, 'healing done': 527}, 'Valewalker': {'wins': 0, 'losses': 6, 'total': 6, 'damage done': 2398, 'healing done': 103}, 'Eldritch': {'wins': 0, 'losses': 8, 'total': 8, 'damage done': 0, 'healing done': 382}, 'Nightshade': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 0, 'healing done': 51}, 'Warden': {'wins': 0, 'losses': 13, 'total': 13, 'damage done': 552, 'healing done': 5431}, 'Druid': {'wins': 0, 'losses': 12, 'total': 12, 'damage done': 9, 'healing done': 10920}, 'Vampiir': {'wins': 0, 'losses': 8, 'total': 8, 'damage done': 179, 'healing done': 0}, 'Bard': {'wins': 0, 'losses': 8, 'total': 8, 'damage done': 466, 'healing done': 414}, 'Blademaster': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 1889, 'healing done': 0}, 'Animist': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 1873, 'healing done': 0}, 'Mentalist': {'wins': 0, 'losses': 7, 'total': 7, 'damage done': 411, 'healing done': 309}, 'Valkyrie': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 9606, 'healing done': 72}, 'Hero': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 483, 'healing done': 113}, 'Friar': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 183, 'healing done': 746}, 'Sorcerer': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 2059, 'healing done': 125}, 'Theurgist': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 2654, 'healing done': 0}, 'Cabalist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 225, 'healing done': 125}, 'Cleric': {'wins': 3, 'losses': 0, 'total': 3, 'damage done': 3368, 'healing done': 11582}, 'Minstrel': {'wins': 4, 'losses': 0, 'total': 4, 'damage done': 16664, 'healing done': 1724}, 'Scout': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 1697, 'healing done': 0}, 'Spiritmaster': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 5078, 'healing done': 0}, 'Warrior': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1071, 'healing done': 0}, 'Bonedancer': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 10134, 'healing done': 2594}, 'Occultist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 15376, 'healing done': 0}, 'Enchanter': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 2882, 'healing done': 164}, 'Champion': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 205, 'healing done': 0}, 'Shaman': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 780, 'healing done': 5705}, 'Ranger': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Paladin': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 3814, 'healing done': 194}, 'Wizard': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 8168, 'healing done': 0}, 'Thane': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 63, 'healing done': 162}}, '2025-04-04': {'Wizard': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 15732, 'healing done': 125}, 'Friar': {'wins': 2, 'losses': 2, 'total': 4, 'damage done': 550, 'healing done': 12116}, 'Sorcerer': {'wins': 16, 'losses': 0, 'total': 16, 'damage done': 65355, 'healing done': 1519}, 'Minstrel': {'wins': 11, 'losses': 0, 'total': 11, 'damage done': 37805, 'healing done': 1060}, 'Runemaster': {'wins': 0, 'losses': 5, 'total': 5, 'damage done': 3789, 'healing done': 0}, 'Healer': {'wins': 0, 'losses': 6, 'total': 6, 'damage done': 173, 'healing done': 11744}, 'Skald': {'wins': 2, 'losses': 10, 'total': 12, 'damage done': 17130, 'healing done': 1433}, 'Shaman': {'wins': 1, 'losses': 9, 'total': 10, 'damage done': 2952, 'healing done': 8850}, 'Thane': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1198, 'healing done': 0}, 'Warlock': {'wins': 0, 'losses': 7, 'total': 7, 'damage done': 9982, 'healing done': 644}, 'Valkyrie': {'wins': 0, 'losses': 6, 'total': 6, 'damage done': 1649, 'healing done': 2332}, 'Shadowblade': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1097, 'healing done': 0}, 'Cabalist': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 3972, 'healing done': 224}, 'Theurgist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 582, 'healing done': 225}, 'Cleric': {'wins': 9, 'losses': 0, 'total': 9, 'damage done': 3328, 'healing done': 36675}, 'Paladin': {'wins': 7, 'losses': 1, 'total': 8, 'damage done': 36362, 'healing done': 12709}, 'Berserker': {'wins': 0, 'losses': 5, 'total': 5, 'damage done': 15380, 'healing done': 959}, 'Spiritmaster': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 9452, 'healing done': 474}, 'Hunter': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 244, 'healing done': 0}, 'Reaver': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 10304, 'healing done': 847}, 'Heretic': {'wins': 5, 'losses': 2, 'total': 7, 'damage done': 33419, 'healing done': 2522}, 'Savage': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 3779, 'healing done': 0}, 'Eldritch': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 14149, 'healing done': 0}, 'Vampiir': {'wins': 1, 'losses': 5, 'total': 6, 'damage done': 24014, 'healing done': 4628}, 'Bard': {'wins': 2, 'losses': 7, 'total': 9, 'damage done': 3064, 'healing done': 6061}, 'Warrior': {'wins': 0, 'losses': 5, 'total': 5, 'damage done': 9442, 'healing done': 698}, 'Necromancer': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 3619, 'healing done': 0}, 'Druid': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 76, 'healing done': 7864}, 'Hero': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 3249, 'healing done': 873}, 'Armsman': {'wins': 7, 'losses': 0, 'total': 7, 'damage done': 25380, 'healing done': 928}, 'Enchanter': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 635, 'healing done': 1368}, 'Valewalker': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 4497, 'healing done': 2050}, 'Blademaster': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 2278, 'healing done': 103}, 'Champion': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 1105, 'healing done': 103}, 'Mercenary': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 8524, 'healing done': 0}, 'Bonedancer': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Mentalist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}}, '2025-04-05': {'Paladin': {'wins': 3, 'losses': 2, 'total': 5, 'damage done': 22907, 'healing done': 5435}, 'Sorcerer': {'wins': 14, 'losses': 2, 'total': 16, 'damage done': 63401, 'healing done': 2860}, 'Minstrel': {'wins': 9, 'losses': 6, 'total': 15, 'damage done': 33829, 'healing done': 3599}, 'Friar': {'wins': 7, 'losses': 2, 'total': 9, 'damage done': 2408, 'healing done': 31538}, 'Heretic': {'wins': 4, 'losses': 5, 'total': 9, 'damage done': 31539, 'healing done': 10621}, 'Bard': {'wins': 6, 'losses': 10, 'total': 16, 'damage done': 5120, 'healing done': 16395}, 'Blademaster': {'wins': 5, 'losses': 5, 'total': 10, 'damage done': 28511, 'healing done': 1598}, 'Druid': {'wins': 7, 'losses': 8, 'total': 15, 'damage done': 643, 'healing done': 41436}, 'Mentalist': {'wins': 5, 'losses': 11, 'total': 16, 'damage done': 52906, 'healing done': 2382}, 'Enchanter': {'wins': 5, 'losses': 4, 'total': 9, 'damage done': 37362, 'healing done': 1749}, 'Champion': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 9847, 'healing done': 165}, 'Vampiir': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 7470, 'healing done': 780}, 'Mercenary': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 2153, 'healing done': 0}, 'Hunter': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 2581, 'healing done': 0}, 'Healer': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 0, 'healing done': 4255}, 'Skald': {'wins': 3, 'losses': 2, 'total': 5, 'damage done': 12375, 'healing done': 184}, 'Shaman': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 2122, 'healing done': 0}, 'Runemaster': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 1908, 'healing done': 343}, 'Valewalker': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 4325, 'healing done': 12}, 'Hero': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 9984, 'healing done': 481}, 'Animist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 80, 'healing done': 0}, 'Warden': {'wins': 3, 'losses': 1, 'total': 4, 'damage done': 476, 'healing done': 4041}, 'Cleric': {'wins': 2, 'losses': 4, 'total': 6, 'damage done': 1544, 'healing done': 21871}, 'Theurgist': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 1541, 'healing done': 302}, 'Occultist': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 2957, 'healing done': 112}, 'Berserker': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 3073, 'healing done': 0}, 'Bonedancer': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 245, 'healing done': 0}, 'Thane': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 162, 'healing done': 0}, 'Warlock': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Valkyrie': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 7776, 'healing done': 2142}, 'Eldritch': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 1267, 'healing done': 1071}, 'Armsman': {'wins': 5, 'losses': 0, 'total': 5, 'damage done': 17926, 'healing done': 740}}, '2025-04-06': {'Friar': {'wins': 5, 'losses': 1, 'total': 6, 'damage done': 6426, 'healing done': 29639}, 'Wizard': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 11308, 'healing done': 8}, 'Sorcerer': {'wins': 7, 'losses': 1, 'total': 8, 'damage done': 25786, 'healing done': 1467}, 'Heretic': {'wins': 3, 'losses': 1, 'total': 4, 'damage done': 24166, 'healing done': 0}, 'Armsman': {'wins': 3, 'losses': 0, 'total': 3, 'damage done': 13349, 'healing done': 567}, 'Bard': {'wins': 4, 'losses': 5, 'total': 9, 'damage done': 2306, 'healing done': 1641}, 'Blademaster': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 2385, 'healing done': 103}, 'Druid': {'wins': 2, 'losses': 4, 'total': 6, 'damage done': 217, 'healing done': 30425}, 'Mentalist': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 19780, 'healing done': 103}, 'Enchanter': {'wins': 3, 'losses': 2, 'total': 5, 'damage done': 15242, 'healing done': 0}, 'Animist': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 9035, 'healing done': 482}, 'Champion': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 818, 'healing done': 0}, 'Eldritch': {'wins': 2, 'losses': 2, 'total': 4, 'damage done': 9658, 'healing done': 388}, 'Cleric': {'wins': 3, 'losses': 3, 'total': 6, 'damage done': 3793, 'healing done': 28440}, 'Minstrel': {'wins': 3, 'losses': 3, 'total': 6, 'damage done': 12638, 'healing done': 3300}, 'Necromancer': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Valewalker': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 1063, 'healing done': 50}, 'Mercenary': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 13630, 'healing done': 1146}, 'Occultist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 97, 'healing done': 0}, 'Cabalist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 8522, 'healing done': 1711}, 'Skald': {'wins': 1, 'losses': 5, 'total': 6, 'damage done': 11017, 'healing done': 3690}, 'Spiritmaster': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 4290, 'healing done': 563}, 'Healer': {'wins': 1, 'losses': 5, 'total': 6, 'damage done': 520, 'healing done': 19356}, 'Berserker': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 5057, 'healing done': 1271}, 'Thane': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 6228, 'healing done': 810}, 'Valkyrie': {'wins': 1, 'losses': 4, 'total': 5, 'damage done': 19408, 'healing done': 8848}, 'Runemaster': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 6123, 'healing done': 42}, 'Nightshade': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Paladin': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 7789, 'healing done': 1353}, 'Hero': {'wins': 2, 'losses': 2, 'total': 4, 'damage done': 19496, 'healing done': 522}, 'Bainshee': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 716, 'healing done': 373}, 'Theurgist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 9041, 'healing done': 0}, 'Savage': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 8908, 'healing done': 1158}, 'Shaman': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 41, 'healing done': 3892}, 'Warrior': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 5184, 'healing done': 403}, 'Warden': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 143, 'healing done': 2129}, 'Warlock': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 1205, 'healing done': 5946}}, '2025-04-07': {'Vampiir': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 16177, 'healing done': 325}, 'Druid': {'wins': 3, 'losses': 0, 'total': 3, 'damage done': 812, 'healing done': 10922}, 'Warden': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 555, 'healing done': 1188}, 'Blademaster': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 15684, 'healing done': 225}, 'Paladin': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 7964, 'healing done': 4313}, 'Friar': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 1292, 'healing done': 5858}, 'Minstrel': {'wins': 4, 'losses': 4, 'total': 8, 'damage done': 9807, 'healing done': 162}, 'Cabalist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Infiltrator': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 839, 'healing done': 0}, 'Necromancer': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 3431, 'healing done': 0}, 'Heretic': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 4322, 'healing done': 1332}, 'Occultist': {'wins': 1, 'losses': 3, 'total': 4, 'damage done': 8731, 'healing done': 1422}, 'Shadowblade': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 680, 'healing done': 279}, 'Hunter': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 738, 'healing done': 0}, 'Warlock': {'wins': 4, 'losses': 0, 'total': 4, 'damage done': 70368, 'healing done': 10904}, 'Healer': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 72, 'healing done': 8443}, 'Skald': {'wins': 3, 'losses': 5, 'total': 8, 'damage done': 29956, 'healing done': 1009}, 'Valkyrie': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 12395, 'healing done': 4484}, 'Armsman': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 4731, 'healing done': 460}, 'Theurgist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 3421, 'healing done': 0}, 'Sorcerer': {'wins': 2, 'losses': 2, 'total': 4, 'damage done': 6341, 'healing done': 1}, 'Cleric': {'wins': 2, 'losses': 4, 'total': 6, 'damage done': 2766, 'healing done': 27985}, 'Wizard': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 407, 'healing done': 0}, 'Bard': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 260, 'healing done': 579}, 'Mentalist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 10907, 'healing done': 0}, 'Shaman': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 0, 'healing done': 2337}, 'Berserker': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 3031, 'healing done': 0}, 'Scout': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 2127, 'healing done': 0}, 'Hero': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 207, 'healing done': 25}, 'Spiritmaster': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}}, '2025-04-08': {'Shaman': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 2364, 'healing done': 3707}, 'Savage': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 9316, 'healing done': 0}, 'Skald': {'wins': 4, 'losses': 4, 'total': 8, 'damage done': 17880, 'healing done': 1042}, 'Healer': {'wins': 3, 'losses': 3, 'total': 6, 'damage done': 0, 'healing done': 18766}, 'Armsman': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 984, 'healing done': 0}, 'Minstrel': {'wins': 7, 'losses': 3, 'total': 10, 'damage done': 20877, 'healing done': 1083}, 'Sorcerer': {'wins': 4, 'losses': 5, 'total': 9, 'damage done': 17025, 'healing done': 213}, 'Heretic': {'wins': 6, 'losses': 5, 'total': 11, 'damage done': 35860, 'healing done': 11106}, 'Cleric': {'wins': 6, 'losses': 5, 'total': 11, 'damage done': 8624, 'healing done': 42421}, 'Warlock': {'wins': 1, 'losses': 4, 'total': 5, 'damage done': 12725, 'healing done': 435}, 'Runemaster': {'wins': 1, 'losses': 4, 'total': 5, 'damage done': 5402, 'healing done': 164}, 'Valkyrie': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 7202, 'healing done': 0}, 'Bard': {'wins': 2, 'losses': 6, 'total': 8, 'damage done': 2315, 'healing done': 5678}, 'Animist': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 161, 'healing done': 0}, 'Druid': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 24, 'healing done': 8062}, 'Mentalist': {'wins': 1, 'losses': 3, 'total': 4, 'damage done': 4242, 'healing done': 103}, 'Eldritch': {'wins': 1, 'losses': 4, 'total': 5, 'damage done': 8595, 'healing done': 103}, 'Blademaster': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 2171, 'healing done': 51}, 'Bainshee': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 594, 'healing done': 0}, 'Infiltrator': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 2501, 'healing done': 0}, 'Hunter': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1531, 'healing done': 0}, 'Berserker': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 1311, 'healing done': 246}, 'Shadowblade': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Bonedancer': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 8509, 'healing done': 0}, 'Thane': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 14528, 'healing done': 266}, 'Spiritmaster': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 12994, 'healing done': 1232}, 'Warden': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 1089, 'healing done': 3878}, 'Hero': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 2134, 'healing done': 206}, 'Champion': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 1750, 'healing done': 216}, 'Wizard': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 12552, 'healing done': 0}, 'Vampiir': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 10413, 'healing done': 1366}, 'Paladin': {'wins': 5, 'losses': 0, 'total': 5, 'damage done': 33134, 'healing done': 7600}, 'Warrior': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 1253, 'healing done': 224}, 'Cabalist': {'wins': 4, 'losses': 0, 'total': 4, 'damage done': 31638, 'healing done': 224}, 'Valewalker': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 9586, 'healing done': 370}, 'Enchanter': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 6680, 'healing done': 0}}, '2025-04-09': {'Mentalist': {'wins': 5, 'losses': 0, 'total': 5, 'damage done': 36224, 'healing done': 0}, 'Druid': {'wins': 3, 'losses': 4, 'total': 7, 'damage done': 128, 'healing done': 27908}, 'Enchanter': {'wins': 4, 'losses': 1, 'total': 5, 'damage done': 19126, 'healing done': 909}, 'Bard': {'wins': 6, 'losses': 8, 'total': 14, 'damage done': 4969, 'healing done': 7099}, 'Eldritch': {'wins': 6, 'losses': 1, 'total': 7, 'damage done': 26442, 'healing done': 508}, 'Cleric': {'wins': 3, 'losses': 3, 'total': 6, 'damage done': 2550, 'healing done': 20694}, 'Theurgist': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 1359, 'healing done': 360}, 'Sorcerer': {'wins': 3, 'losses': 3, 'total': 6, 'damage done': 14215, 'healing done': 0}, 'Mercenary': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1871, 'healing done': 0}, 'Hero': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 8068, 'healing done': 0}, 'Valewalker': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 6462, 'healing done': 0}, 'Thane': {'wins': 3, 'losses': 2, 'total': 5, 'damage done': 14376, 'healing done': 405}, 'Spiritmaster': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 9349, 'healing done': 0}, 'Shadowblade': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 1442, 'healing done': 0}, 'Skald': {'wins': 2, 'losses': 4, 'total': 6, 'damage done': 20043, 'healing done': 202}, 'Animist': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 5358, 'healing done': 0}, 'Ranger': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 93, 'healing done': 0}, 'Vampiir': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 9077, 'healing done': 1052}, 'Wizard': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 13604, 'healing done': 0}, 'Minstrel': {'wins': 4, 'losses': 0, 'total': 4, 'damage done': 5374, 'healing done': 229}, 'Warlock': {'wins': 0, 'losses': 7, 'total': 7, 'damage done': 12213, 'healing done': 0}, 'Shaman': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 1549, 'healing done': 7292}, 'Healer': {'wins': 1, 'losses': 7, 'total': 8, 'damage done': 67, 'healing done': 4621}, 'Warden': {'wins': 3, 'losses': 1, 'total': 4, 'damage done': 1685, 'healing done': 10196}, 'Warrior': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 10852, 'healing done': 566}, 'Savage': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 897, 'healing done': 60}, 'Berserker': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 175, 'healing done': 0}, 'Paladin': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 2681, 'healing done': 69}, 'Scout': {'wins': 4, 'losses': 0, 'total': 4, 'damage done': 11745, 'healing done': 520}, 'Champion': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 566, 'healing done': 368}, 'Friar': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 1469, 'healing done': 2247}, 'Cabalist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 3312, 'healing done': 0}, 'Runemaster': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Occultist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 7013, 'healing done': 0}, 'Reaver': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 594, 'healing done': 242}}, '2025-04-10': {'Warden': {'wins': 3, 'losses': 0, 'total': 3, 'damage done': 3788, 'healing done': 9632}, 'Druid': {'wins': 3, 'losses': 0, 'total': 3, 'damage done': 812, 'healing done': 6632}, 'Bard': {'wins': 3, 'losses': 0, 'total': 3, 'damage done': 1426, 'healing done': 1175}, 'Champion': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 4207, 'healing done': 162}, 'Mentalist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 9439, 'healing done': 1449}, 'Minstrel': {'wins': 3, 'losses': 4, 'total': 7, 'damage done': 11139, 'healing done': 1117}, 'Friar': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Heretic': {'wins': 3, 'losses': 4, 'total': 7, 'damage done': 15603, 'healing done': 2108}, 'Theurgist': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 0, 'healing done': 93}, 'Sorcerer': {'wins': 3, 'losses': 5, 'total': 8, 'damage done': 16775, 'healing done': 612}, 'Enchanter': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 16369, 'healing done': 375}, 'Valewalker': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 16534, 'healing done': 501}, 'Armsman': {'wins': 2, 'losses': 2, 'total': 4, 'damage done': 13879, 'healing done': 568}, 'Cabalist': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 8182, 'healing done': 274}, 'Cleric': {'wins': 3, 'losses': 4, 'total': 7, 'damage done': 2767, 'healing done': 18827}, 'Occultist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 11752, 'healing done': 0}, 'Spiritmaster': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 2964, 'healing done': 0}, 'Skald': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 6229, 'healing done': 946}, 'Healer': {'wins': 1, 'losses': 2, 'total': 3, 'damage done': 163, 'healing done': 4697}, 'Warlock': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 5950, 'healing done': 2718}, 'Shaman': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 59, 'healing done': 0}, 'Thane': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 4779, 'healing done': 0}, 'Paladin': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 5036, 'healing done': 920}, 'Wizard': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Mercenary': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 2314, 'healing done': 0}}, '2025-04-11': {'Healer': {'wins': 4, 'losses': 0, 'total': 4, 'damage done': 423, 'healing done': 1297}, 'Bonedancer': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 16094, 'healing done': 0}, 'Thane': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 6694, 'healing done': 0}, 'Savage': {'wins': 2, 'losses': 0, 'total': 2, 'damage done': 7428, 'healing done': 0}, 'Mercenary': {'wins': 2, 'losses': 3, 'total': 5, 'damage done': 19507, 'healing done': 1419}, 'Cleric': {'wins': 0, 'losses': 3, 'total': 3, 'damage done': 2064, 'healing done': 11282}, 'Theurgist': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 0}, 'Paladin': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 23, 'healing done': 50}, 'Wizard': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 517, 'healing done': 395}, 'Heretic': {'wins': 0, 'losses': 2, 'total': 2, 'damage done': 2925, 'healing done': 759}, 'Minstrel': {'wins': 0, 'losses': 4, 'total': 4, 'damage done': 1029, 'healing done': 91}, 'Reaver': {'wins': 1, 'losses': 1, 'total': 2, 'damage done': 5052, 'healing done': 274}, 'Friar': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 460, 'healing done': 7029}, 'Mentalist': {'wins': 1, 'losses': 0, 'total': 1, 'damage done': 12062, 'healing done': 225}, 'Vampiir': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 16530, 'healing done': 1898}, 'Bard': {'wins': 2, 'losses': 1, 'total': 3, 'damage done': 2304, 'healing done': 8794}, 'Warden': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 1285, 'healing done': 1339}, 'Bainshee': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 2683, 'healing done': 686}, 'Druid': {'wins': 0, 'losses': 1, 'total': 1, 'damage done': 0, 'healing done': 224}}};
                var rawDataTimes = Object.keys(rawData).map(date => new Date(date).getTime());  // Convert date string to timestamp (milliseconds)

        // Get the minimum and maximum time
        var originalMinTime = new Date(Math.min(...rawDataTimes));  // Get the minimum timestamp
        var originalMaxTime = new Date(Math.max(...rawDataTimes));  // Get the maximum timestamp
                // Initial start and end time for filtering (based on raw data)

                // Track the current time window
                let currentMinTime = originalMinTime;
                let currentMaxTime = originalMaxTime;

                function processData(startTime, endTime) {
                    let groupedData = {};

                    // Loop through the raw data (which is in the format of date -> class -> stats)
                    for (let date in rawData) {
                        if (new Date(date) >= startTime && new Date(date) <= endTime) {
                            let dayData = rawData[date];
                            
                            // Group by class and aggregate the values
                            for (let className in dayData) {
                                if (!groupedData[className]) {
                                    groupedData[className] = { wins: 0, losses: 0, damage: 0, healing: 0, timeSeries: [] };
                                }

                                let { wins, losses, 'damage done': damage, 'healing done': healing } = dayData[className];
                                groupedData[className].wins += wins;
                                groupedData[className].losses += losses;
                                groupedData[className].damage += damage;
                                groupedData[className].healing += healing;
                                
                                // Add data to time series
                                groupedData[className].timeSeries.push([new Date(date).getTime(), wins]);
                            }
                        }
                    }
                    console.log(groupedData);
                    let seriesData = Object.keys(groupedData).map(className => ({
                        name: className,
                        type: 'line',
                        smooth: true,
                        data: groupedData[className].timeSeries
                    }));

                        // Create table data based on the grouped data
                    // Now process table data based on groupedData
                    let tableData = Object.keys(groupedData).map(className => {
                        let { wins, losses, damage, healing } = groupedData[className];
                        let winRate = wins + losses === 0 ? 0 : ((wins / (wins + losses)) * 100).toFixed(2);  // Correct win rate calculation
                        return {
                            class: className,
                            wins: wins,
                            losses: losses,
                            winRate: winRate,
                            damage: damage,
                            healing: healing
                        };
                    });

                    updateTable(tableData);
                    return seriesData;
                }

                function updateTable(tableData) {
                    let tbody = document.querySelector("#data-table tbody");
                    tbody.innerHTML = tableData.length ? tableData.map(row => {
                        return `<tr>
                            <td data-column="class">${row.class}</td>
                            <td data-column="wins">${row.wins}</td>
                            <td data-column="losses">${row.losses}</td>
                            <td data-column="winrate">${row.winRate}%</td>
                            <td data-column="damage">${row.damage}</td>
                            <td data-column="healing">${row.healing}</td>
                        </tr>`;
                    }).join('') : "<tr><td colspan='6'>No data available in this range</td></tr>";
                }

                function goupTheData(startTime, endTime){
                    var groupedData = {};
                    // Assuming startTime and endTime are valid Date objects or date strings
                    Object.keys(rawData).forEach(date => {
                        // Convert the date string to a Date object if it's not already
                        let currentDate = new Date(date);

                        // Check if the currentDate is between startTime and endTime
                        if (currentDate >= startTime && currentDate <= endTime) {
                            // If within range, iterate through each class and accumulate win rates
                            Object.keys(rawData[date]).forEach(className => {
                                let d = rawData[date][className];  // Get the data for each class
                                if (!groupedData[className]) {
                                    groupedData[className] = { winRates: [] };  // Initialize if not already present
                                }
                                // Calculate the win rate and push it to the winRates array
                                let winRate = d.wins / (d.wins + d.losses);
                                groupedData[className].winRates.push(winRate);
                            });
                        }
                    });
                    return groupedData;
                };


                function prepareBoxPlotData(values) {
                    values.sort((a, b) => a - b);
                    const min = values[0];
                    const max = values[values.length - 1];
                    const q1 = values[Math.floor(values.length * 0.25)];
                    const median = values[Math.floor(values.length * 0.5)];
                    const q3 = values[Math.floor(values.length * 0.75)];
                    return [min, q1, median, q3, max];
                }

                var chart1 = echarts.init(document.getElementById('box-whisker-chart'));
                function processBoxPlot(chart1, currentMinTime, currentMaxTime) {
                    var groupedData = goupTheData(currentMinTime, currentMaxTime);
                    var winRateBoxData = [];
                    var validClasses = [];
                    var winRateBoxData = [];
                    var validClasses = [];
                    classes.forEach(cls => {
                        if (groupedData[cls] && groupedData[cls].winRates.length > 0) {
                            validClasses.push(cls);
                            winRateBoxData.push(prepareBoxPlotData(groupedData[cls].winRates));
                        }
                    });
                    validClasses.sort();
                    
                    var option1 ={
                        title: { text: 'Box and Whisker Plot for Win Rates', left: 'center' },
                        tooltip: { trigger: 'item', axisPointer: { type: 'shadow' } },
                        xAxis: { type: 'category', data: validClasses, axisLabel: { rotate: 45 } },
                        yAxis: { type: 'value', name: 'Win Rate', min: 0, max: 1 },
                        series: [
                            { name: 'Win Rate', type: 'boxplot', data: winRateBoxData }
                        ]
                    };
                    chart1.setOption(option1);
                };
                processBoxPlot(chart1, currentMinTime, currentMaxTime)

                // Initial data processing
                let seriesData = processData(currentMinTime, currentMaxTime);

                var option = {
                    title: {
                        text: 'Wins by Class',
                        left: "center"
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: classes,
                        orient: 'horizontal',
                        bottom: 50, // Add a little more padding here to move the legend down
                        left: 'center'
                    },
                    grid: {
                        bottom: 150 // Add space at the bottom for the legend and zoom slider
                    },
                    xAxis: {
                        type: 'time',
                        name: 'Time'
                    },
                    yAxis: {
                        type: 'value',
                        name: 'Wins'
                    },
                    dataZoom: [
                        {
                            type: 'slider',
                            show: true,
                            xAxisIndex: 0,
                            start: 0,
                            end: 100
                        },
                        {
                            type: 'inside',
                            xAxisIndex: 0
                        }
                    ],
                    series: seriesData
                };

                chart.setOption(option);
                chart.on('datazoom', function (params) {
                    // Get the percentage values from the dataZoom event
                    let startPercent = params.start; // 0 to 100
                    let endPercent = params.end; // 0 to 100

                    // Calculate the time range from the percentages (relative to the original data bounds)
                    let timeRange = originalMaxTime.getTime() - originalMinTime.getTime();
                    let newMinTime = new Date(originalMinTime.getTime() + (timeRange * startPercent / 100));
                    let newMaxTime = new Date(originalMinTime.getTime() + (timeRange * endPercent / 100));

                    // Only update if the time range has changed
                    if (newMinTime.getTime() !== currentMinTime.getTime() || newMaxTime.getTime() !== currentMaxTime.getTime()) {
                        currentMinTime = newMinTime;
                        currentMaxTime = newMaxTime;

                        // Reprocess data based on updated time range and refresh both the chart and table
                        let newSeries = processData(currentMinTime, currentMaxTime);
                        chart.setOption({ series: newSeries });
                    }
                    processBoxPlot(chart1, currentMinTime, currentMaxTime);
                });

                // Sorting functionality for table
                // Ensure each table header has the corresponding data-column attribute
        const tableHeaders = document.querySelectorAll('th');
        tableHeaders.forEach(header => {
            header.addEventListener('click', function () {
                const column = this.getAttribute('data-column'); // Get the column name
                const rows = Array.from(document.querySelector('#data-table tbody').rows);

                // Determine sort order
                const currentSortOrder = this.dataset.sortOrder || 'asc';
                const newSortOrder = currentSortOrder === 'asc' ? 'desc' : 'asc';

                // Sort the rows based on the clicked column
                rows.sort((rowA, rowB) => {
                    const valA = rowA.querySelector(`td[data-column="${column}"]`).innerText;
                    const valB = rowB.querySelector(`td[data-column="${column}"]`).innerText;

                    if (column === 'class') {
                        return (valA > valB ? 1 : -1) * (newSortOrder === 'asc' ? 1 : -1);
                    }            
                    return (parseFloat(valA) - parseFloat(valB)) * (newSortOrder === 'asc' ? 1 : -1);
                });

                // Reorder the rows in the table body
                rows.forEach(row => {
                    document.querySelector('#data-table tbody').appendChild(row);
                });

                // Update sort order in the header for the next click
                this.dataset.sortOrder = newSortOrder;
            });
        });

            </script>
        </body>
        </html>

